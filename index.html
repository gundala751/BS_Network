<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>SURANDA NETWORK</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>

<style>
body{
margin:0;
font-family:Arial;
text-align:center;
background:linear-gradient(135deg,#001f1f,#2b0052);
color:white;
}

header{
padding:20px;
background:linear-gradient(90deg,#00ff99,#7b2cff);
}

.logo{
width:90px;
border-radius:50%;
animation:spin 6s linear infinite;
box-shadow:0 0 25px #00ff99;
}

@keyframes spin{
100%{transform:rotate(360deg);}
}

.card{
background:rgba(255,255,255,0.05);
margin:20px;
padding:20px;
border-radius:20px;
}

button{
padding:12px 25px;
border:none;
border-radius:25px;
background:linear-gradient(90deg,#00ff99,#7b2cff);
color:white;
font-size:16px;
cursor:pointer;
}

canvas{
background:white;
border-radius:10px;
margin-top:15px;
}
</style>
</head>

<body>

<header>
<img src="logo-coin.png" class="logo">
<h2>SURANDA NETWORK</h2>
</header>

<div id="loginCard" class="card">
<h3>Login dengan Google</h3>
<button onclick="login()">Login Google</button>
</div>

<div id="app" style="display:none;">

<div class="card">
<h3 id="user"></h3>
<p>Saldo: <span id="saldo">0</span> $CBS</p>
<button onclick="mine()">Start Mining</button>
</div>

<div class="card">
<h3>Grafik Saldo</h3>
<canvas id="chart" width="300" height="200"></canvas>
</div>

<button onclick="logout()">Logout</button>

</div>

<script type="module">

// ðŸ”´ MASUKKAN FIREBASE CONFIG DISINI
const firebaseConfig = {
  apiKey: "ISI_API_KEY",
  authDomain: "ISI_AUTH_DOMAIN",
  projectId: "ISI_PROJECT_ID",
  storageBucket: "ISI_STORAGE",
  messagingSenderId: "ISI_SENDER_ID",
  appId: "ISI_APP_ID"
};

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getFirestore, doc, getDoc, setDoc, updateDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const app = initializeApp(firebaseConfig);
const auth = getAuth();
const db = getFirestore();

let saldo = 0;
let chartData = [];

window.login = async function(){
const provider = new GoogleAuthProvider();
await signInWithPopup(auth, provider);
}

window.logout = async function(){
await signOut(auth);
}

onAuthStateChanged(auth, async (user)=>{
if(user){
document.getElementById("loginCard").style.display="none";
document.getElementById("app").style.display="block";
document.getElementById("user").innerText="Halo "+user.displayName;

const docRef = doc(db,"users",user.uid);
const docSnap = await getDoc(docRef);

if(docSnap.exists()){
saldo = docSnap.data().saldo;
}else{
await setDoc(docRef,{saldo:0});
saldo=0;
}

updateUI();
}
});

window.mine = async function(){
const user = auth.currentUser;
saldo += 5;

await updateDoc(doc(db,"users",user.uid),{
saldo: saldo
});

updateUI();
}

function updateUI(){
document.getElementById("saldo").innerText = saldo;
chartData.push(saldo);
drawChart();
}

function drawChart(){
const canvas=document.getElementById("chart");
const ctx=canvas.getContext("2d");
ctx.clearRect(0,0,300,200);
ctx.beginPath();
ctx.moveTo(0,200-chartData[0]);

chartData.forEach((val,i)=>{
ctx.lineTo(i*30,200-val);
});

ctx.stroke();
}

</script>

</body>
</html>
