<!DOCTYPE html>
<html>
<head>
  <title>SURANDA NETWORK</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      margin:0;
      font-family:Arial;
      text-align:center;
      background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
      color:white;
    }

    .card {
      margin:20px;
      padding:20px;
      border-radius:20px;
      background:rgba(255,255,255,0.05);
    }

    button {
      padding:15px 40px;
      border:none;
      border-radius:50px;
      font-size:18px;
      background:linear-gradient(90deg,#00ff9d,#a100ff);
      color:white;
    }
  </style>
</head>
<body>

<img src="logo-coin.png" width="120">

<h1>SURANDA NETWORK</h1>

<div class="card">
  <h2 id="userName">Login dulu</h2>
  <h3>Saldo: <span id="saldo">0</span> $CBS</h3>
  <button onclick="startMining()">Start Mining</button>
</div>

<button onclick="login()">Login Google</button>
<button onclick="logout()">Logout</button>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getAuth, signInWithPopup, GoogleAuthProvider, signOut } 
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";

import { getFirestore, doc, getDoc, setDoc, updateDoc } 
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "ISI_API_KAMU",
  authDomain: "suranda-network.firebaseapp.com",
  projectId: "suranda-network",
  storageBucket: "suranda-network.firebasestorage.app",
  messagingSenderId: "704323506183",
  appId: "1:704323506183:web:c49d907abda335f012daa2"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth();
const db = getFirestore();
const provider = new GoogleAuthProvider();

let currentUser = null;

window.login = async function(){
  const result = await signInWithPopup(auth, provider);
  currentUser = result.user;
  document.getElementById("userName").innerText = "Halo, " + currentUser.displayName;
  loadSaldo();
}

window.logout = async function(){
  await signOut(auth);
  location.reload();
}

async function loadSaldo(){
  const docRef = doc(db, "users", currentUser.uid);
  const docSnap = await getDoc(docRef);

  if(docSnap.exists()){
    document.getElementById("saldo").innerText = docSnap.data().saldo;
  }else{
    await setDoc(docRef, { saldo: 0 });
  }
}

window.startMining = async function(){
  if(!currentUser){
    alert("Login dulu!");
    return;
  }

  const docRef = doc(db, "users", currentUser.uid);
  const docSnap = await getDoc(docRef);

  let saldo = docSnap.data().saldo + 1;

  await updateDoc(docRef, { saldo: saldo });
  document.getElementById("saldo").innerText = saldo;
}

</script>

</body>
</html>
bio 
